@startuml
'https://plantuml.com/sequence-diagram
allow_mixing
skinparam style strictuml
skinparam classAttributeIconSize 0
skinparam circledCharacterRadius 0
skinparam circledCharacterFontSize 0
skinparam classFontStyle Bold
'autonumber
hide enum methods

'Controleur
interface AntFacadeController <<interface>> {
    '+setParameters( evaporationParam:Integer, foodParam:Integer, pheromoneParam:Integer )
    +createColony(row:Integer,column:Integer)
    +createGrid(width:Integer, height:Integer)
    +putObstacle(row:Integer, column:Integer)
    '+putFood( row:Integer, column:Integer, quantity:Integer);
    '+createWorkers( amount:Integer )
    +createSoldiers(amount:Integer)
    '+setAntFile(antLogFile:String);
    +play(duration:Integer,record:boolean):BitSet[][]
}

class Node {
    -food:Integer
    -pheromones:Integer
    +Node()
    +getNoeudState():STATE
    +setNoeudState(State:STATE)
    +addNoeudVoisin(noeud:Noeud)
    +getVoisins():Node[*]
    +getFreeVoisins():Node[*]
    +getPheromones:Integer
    +setFood(amount:Integer)
}
enum STATE <<enum>> {
    FREE
    OBSTACLE
    ANTHILL
}

'class Food{
'    -amount:Integer
'    +Food()
'}
class Pheromone{
}


abstract Ant <<abstract>> {
    +getPosition():Node
    +setPosition(position:Noeud)
    {abstract} +move()
}
class Queen{
    -collectCapacity:Integer
    +Queen(position:Noeud, collectCapacity:Integer)
    +move() <<override>>
    +createSoldiers(amount:Integer)
    +setCollectCapacity(:Integer)
    +getCollectCapacity():Integer
}
class Soldier{
    +Soldier(position:Node, colony:Queen)
    +move() <<override>>
}

class Worker {
    +Worker(position:Node , colony:Queen)
    +move() <<override>>
    +collect()
}


class ControlAnt implements AntFacadeController{
}


class Graph{
 -width:Integer
 -height:Integer
 +Graph(witdh:Integer, height:Integer)
 +getNoeud(row:Integer, column:Integer):Node
 +putObstacle(row:Integer, column:Integer)
 +createColony(row:Integer,column:Integer)
 +getNoeudList():Node[*]
 +getWidth():Integer
 +getHeight():Integer
}


Soldier --|> Ant
Queen -l-|> Ant
Worker --|> Ant

ControlAnt "-graphe\n1 " *-l-> Graph
ControlAnt  *--> "-listeFourmis\n1..*" Ant

Graph *-r-> "-noeudList \n0..n" Node : composé de >
'historique = liste de noeud déjà passé par la fourmi
'"-position 1\n-historique 0..*"
Ant *---> "-position\n1" Node  : est sur un >
Node o-> "-voisins\n0..*"  Node  : est voisin de >

Node -l-> STATE : <<uses>>
'Node --> "-food\n1" Food : contient >

Soldier *---> "-colony\n1" Queen : provient de >
Worker *--> "-colony\n1" Queen : provient de >

@enduml